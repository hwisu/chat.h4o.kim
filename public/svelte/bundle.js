var Wt=Array.isArray,mn=Array.prototype.indexOf,Gt=Array.from,Ir=Object.defineProperty,Ne=Object.getOwnPropertyDescriptor,Rr=Object.getOwnPropertyDescriptors,pn=Object.prototype,yn=Array.prototype,Xt=Object.getPrototypeOf,hr=Object.isExtensible;const Oe=()=>{};function wn(e){return e()}function it(e){for(var t=0;t<e.length;t++)e[t]()}const ne=2,Dr=4,yt=8,Zt=16,_e=32,qe=64,ut=128,X=256,ct=512,V=1024,de=2048,be=4096,ce=8192,wt=16384,bn=32768,Jt=65536,kn=1<<17,Sn=1<<19,Nr=1<<20,qt=1<<21,fe=Symbol("$state"),En=Symbol("legacy props"),An=Symbol("");function Or(e){return e===this.v}function Ur(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Qt(e){return!Ur(e,this.v)}function Tn(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function xn(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Mn(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Cn(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Ln(e){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function Pn(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function In(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Rn(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Dn(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Ke=!1;function Nn(){Ke=!0}const On=1,Un=2,zn=16,qn=1,Kn=2,jn=4,Hn=8,Fn=16,Bn=2,Y=Symbol(),Vn="http://www.w3.org/1999/xhtml";function zr(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let D=null;function gr(e){D=e}function se(e,t=!1,r){var n=D={p:D,c:null,d:!1,e:null,m:!1,s:e,x:null,l:null};Ke&&!t&&(D.l={s:null,u:null,r1:[],r2:et(!1)}),St(()=>{n.d=!0})}function ae(e){const t=D;if(t!==null){const i=t.e;if(i!==null){var r=N,n=U;t.e=null;try{for(var a=0;a<i.length;a++){var s=i[a];we(s.effect),le(s.reaction),er(s.fn)}}finally{we(r),le(n)}}D=t.p,t.m=!0}return{}}function at(){return!Ke||D!==null&&D.l===null}function Se(e){if(typeof e!="object"||e===null||fe in e)return e;const t=Xt(e);if(t!==pn&&t!==yn)return e;var r=new Map,n=Wt(e),a=K(0),s=U,i=l=>{var o=U;le(s);var u=l();return le(o),u};return n&&r.set("length",K(e.length)),new Proxy(e,{defineProperty(l,o,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&In();var v=r.get(o);return v===void 0?(v=i(()=>K(u.value)),r.set(o,v)):A(v,i(()=>Se(u.value))),!0},deleteProperty(l,o){var u=r.get(o);if(u===void 0)o in l&&(r.set(o,i(()=>K(Y))),Nt(a));else{if(n&&typeof o=="string"){var v=r.get("length"),f=Number(o);Number.isInteger(f)&&f<v.v&&A(v,f)}A(u,Y),Nt(a)}return!0},get(l,o,u){var h;if(o===fe)return e;var v=r.get(o),f=o in l;if(v===void 0&&(!f||(h=Ne(l,o))!=null&&h.writable)&&(v=i(()=>K(Se(f?l[o]:Y))),r.set(o,v)),v!==void 0){var c=_(v);return c===Y?void 0:c}return Reflect.get(l,o,u)},getOwnPropertyDescriptor(l,o){var u=Reflect.getOwnPropertyDescriptor(l,o);if(u&&"value"in u){var v=r.get(o);v&&(u.value=_(v))}else if(u===void 0){var f=r.get(o),c=f==null?void 0:f.v;if(f!==void 0&&c!==Y)return{enumerable:!0,configurable:!0,value:c,writable:!0}}return u},has(l,o){var c;if(o===fe)return!0;var u=r.get(o),v=u!==void 0&&u.v!==Y||Reflect.has(l,o);if(u!==void 0||N!==null&&(!v||(c=Ne(l,o))!=null&&c.writable)){u===void 0&&(u=i(()=>K(v?Se(l[o]):Y)),r.set(o,u));var f=_(u);if(f===Y)return!1}return v},set(l,o,u,v){var S;var f=r.get(o),c=o in l;if(n&&o==="length")for(var h=u;h<f.v;h+=1){var y=r.get(h+"");y!==void 0?A(y,Y):h in l&&(y=i(()=>K(Y)),r.set(h+"",y))}f===void 0?(!c||(S=Ne(l,o))!=null&&S.writable)&&(f=i(()=>K(void 0)),A(f,i(()=>Se(u))),r.set(o,f)):(c=f.v!==Y,A(f,i(()=>Se(u))));var x=Reflect.getOwnPropertyDescriptor(l,o);if(x!=null&&x.set&&x.set.call(v,u),!c){if(n&&typeof o=="string"){var p=r.get("length"),g=Number(o);Number.isInteger(g)&&g>=p.v&&A(p,g+1)}Nt(a)}return!0},ownKeys(l){_(a);var o=Reflect.ownKeys(l).filter(f=>{var c=r.get(f);return c===void 0||c.v!==Y});for(var[u,v]of r)v.v!==Y&&!(u in l)&&o.push(u);return o},setPrototypeOf(){Rn()}})}function Nt(e,t=1){A(e,e.v+t)}function mr(e){try{if(e!==null&&typeof e=="object"&&fe in e)return e[fe]}catch{}return e}function Yn(e,t){return Object.is(mr(e),mr(t))}function Qe(e){var t=ne|de,r=U!==null&&(U.f&ne)!==0?U:null;return N===null||r!==null&&(r.f&X)!==0?t|=X:N.f|=Nr,{ctx:D,deps:null,effects:null,equals:Or,f:t,fn:e,reactions:null,rv:0,v:null,wv:0,parent:r??N}}function Ee(e){const t=Qe(e);return t.equals=Qt,t}function qr(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)ye(t[r])}}function Wn(e){for(var t=e.parent;t!==null;){if((t.f&ne)===0)return t;t=t.parent}return null}function Kr(e){var t,r=N;we(Wn(e));try{qr(e),t=sn(e)}finally{we(r)}return t}function jr(e){var t=Kr(e);if(e.equals(t)||(e.v=t,e.wv=rn()),!Fe){var r=(pe||(e.f&X)!==0)&&e.deps!==null?be:V;J(e,r)}}const $e=new Map;function et(e,t){var r={f:0,v:e,reactions:null,equals:Or,rv:0,wv:0};return r}function K(e,t){const r=et(e);return as(r),r}function Ue(e,t=!1){var n;const r=et(e);return t||(r.equals=Qt),Ke&&D!==null&&D.l!==null&&((n=D.l).s??(n.s=[])).push(r),r}function Gn(e,t){return A(e,ve(()=>_(e))),t}function A(e,t,r=!1){U!==null&&!oe&&at()&&(U.f&(ne|Zt))!==0&&!(B!=null&&B.includes(e))&&Dn();let n=r?Se(t):t;return Hr(e,n)}function Hr(e,t){if(!e.equals(t)){var r=e.v;Fe?$e.set(e,t):$e.set(e,r),e.v=t,(e.f&ne)!==0&&((e.f&de)!==0&&Kr(e),J(e,(e.f&X)===0?V:be)),e.wv=rn(),Fr(e,de),at()&&N!==null&&(N.f&V)!==0&&(N.f&(_e|qe))===0&&(Z===null?os([e]):Z.push(e))}return t}function Fr(e,t){var r=e.reactions;if(r!==null)for(var n=at(),a=r.length,s=0;s<a;s++){var i=r[s],l=i.f;(l&de)===0&&(!n&&i===N||(J(i,t),(l&(V|X))!==0&&((l&ne)!==0?Fr(i,be):Tt(i))))}}let Xn=!1;var tt,Br,Vr,Yr;function Zn(){if(tt===void 0){tt=window,Br=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,r=Text.prototype;Vr=Ne(t,"firstChild").get,Yr=Ne(t,"nextSibling").get,hr(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),hr(r)&&(r.__t=void 0)}}function $t(e=""){return document.createTextNode(e)}function Ae(e){return Vr.call(e)}function bt(e){return Yr.call(e)}function b(e,t){return Ae(e)}function kt(e,t){{var r=Ae(e);return r instanceof Comment&&r.data===""?bt(r):r}}function C(e,t=1,r=!1){let n=e;for(;t--;)n=bt(n);return n}function Jn(e){e.textContent=""}function Wr(e){N===null&&U===null&&Mn(),U!==null&&(U.f&X)!==0&&N===null&&xn(),Fe&&Tn()}function Qn(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function je(e,t,r,n=!0){var a=N,s={ctx:D,deps:null,nodes_start:null,nodes_end:null,f:e|de,first:null,fn:t,last:null,next:null,parent:a,prev:null,teardown:null,transitions:null,wv:0};if(r)try{At(s),s.f|=bn}catch(o){throw ye(s),o}else t!==null&&Tt(s);var i=r&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&(Nr|ut))===0;if(!i&&n&&(a!==null&&Qn(s,a),U!==null&&(U.f&ne)!==0)){var l=U;(l.effects??(l.effects=[])).push(s)}return s}function St(e){const t=je(yt,null,!1);return J(t,V),t.teardown=e,t}function ft(e){Wr();var t=N!==null&&(N.f&_e)!==0&&D!==null&&!D.m;if(t){var r=D;(r.e??(r.e=[])).push({fn:e,effect:N,reaction:U})}else{var n=er(e);return n}}function $n(e){return Wr(),He(e)}function es(e){const t=je(qe,e,!0);return(r={})=>new Promise(n=>{r.outro?dt(t,()=>{ye(t),n(void 0)}):(ye(t),n(void 0))})}function er(e){return je(Dr,e,!1)}function pr(e,t){var r=D,n={effect:null,ran:!1};r.l.r1.push(n),n.effect=He(()=>{e(),!n.ran&&(n.ran=!0,A(r.l.r2,!0),ve(t))})}function ts(){var e=D;He(()=>{if(_(e.l.r2)){for(var t of e.l.r1){var r=t.effect;(r.f&V)!==0&&J(r,be),Be(r)&&At(r),t.ran=!1}e.l.r2.v=!1}})}function He(e){return je(yt,e,!0)}function q(e,t=[],r=Qe){const n=t.map(r);return tr(()=>e(...n.map(_)))}function tr(e,t=0){return je(yt|Zt|t,e,!0)}function rt(e,t=!0){return je(yt|_e,e,!0,t)}function Gr(e){var t=e.teardown;if(t!==null){const r=Fe,n=U;yr(!0),le(null);try{t.call(null)}finally{yr(r),le(n)}}}function Xr(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){var n=r.next;(r.f&qe)!==0?r.parent=null:ye(r,t),r=n}}function rs(e){for(var t=e.first;t!==null;){var r=t.next;(t.f&_e)===0&&ye(t),t=r}}function ye(e,t=!0){var r=!1;(t||(e.f&Sn)!==0)&&e.nodes_start!==null&&(Zr(e.nodes_start,e.nodes_end),r=!0),Xr(e,t&&!r),pt(e,0),J(e,wt);var n=e.transitions;if(n!==null)for(const s of n)s.stop();Gr(e);var a=e.parent;a!==null&&a.first!==null&&Jr(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function Zr(e,t){for(;e!==null;){var r=e===t?null:bt(e);e.remove(),e=r}}function Jr(e){var t=e.parent,r=e.prev,n=e.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=r))}function dt(e,t){var r=[];rr(e,r,!0),Qr(r,()=>{ye(e),t&&t()})}function Qr(e,t){var r=e.length;if(r>0){var n=()=>--r||t();for(var a of e)a.out(n)}else t()}function rr(e,t,r){if((e.f&ce)===0){if(e.f^=ce,e.transitions!==null)for(const i of e.transitions)(i.is_global||r)&&t.push(i);for(var n=e.first;n!==null;){var a=n.next,s=(n.f&Jt)!==0||(n.f&_e)!==0;rr(n,t,s?r:!1),n=a}}}function vt(e){$r(e,!0)}function $r(e,t){if((e.f&ce)!==0){e.f^=ce,(e.f&V)===0&&(e.f^=V),Be(e)&&(J(e,de),Tt(e));for(var r=e.first;r!==null;){var n=r.next,a=(r.f&Jt)!==0||(r.f&_e)!==0;$r(r,a?t:!1),r=n}if(e.transitions!==null)for(const s of e.transitions)(s.is_global||t)&&s.in()}}let nt=[],Kt=[];function en(){var e=nt;nt=[],it(e)}function ns(){var e=Kt;Kt=[],it(e)}function _t(e){nt.length===0&&queueMicrotask(en),nt.push(e)}function ss(){nt.length>0&&en(),Kt.length>0&&ns()}let lt=!1,ht=!1,gt=null,Te=!1,Fe=!1;function yr(e){Fe=e}let Xe=[];let U=null,oe=!1;function le(e){U=e}let N=null;function we(e){N=e}let B=null;function as(e){U!==null&&U.f&qt&&(B===null?B=[e]:B.push(e))}let F=null,G=0,Z=null;function os(e){Z=e}let tn=1,mt=0,pe=!1;function rn(){return++tn}function Be(e){var f;var t=e.f;if((t&de)!==0)return!0;if((t&be)!==0){var r=e.deps,n=(t&X)!==0;if(r!==null){var a,s,i=(t&ct)!==0,l=n&&N!==null&&!pe,o=r.length;if(i||l){var u=e,v=u.parent;for(a=0;a<o;a++)s=r[a],(i||!((f=s==null?void 0:s.reactions)!=null&&f.includes(u)))&&(s.reactions??(s.reactions=[])).push(u);i&&(u.f^=ct),l&&v!==null&&(v.f&X)===0&&(u.f^=X)}for(a=0;a<o;a++)if(s=r[a],Be(s)&&jr(s),s.wv>e.wv)return!0}(!n||N!==null&&!pe)&&J(e,V)}return!1}function ls(e,t){for(var r=t;r!==null;){if((r.f&ut)!==0)try{r.fn(e);return}catch{r.f^=ut}r=r.parent}throw lt=!1,e}function wr(e){return(e.f&wt)===0&&(e.parent===null||(e.parent.f&ut)===0)}function Et(e,t,r,n){if(lt){if(r===null&&(lt=!1),wr(t))throw e;return}if(r!==null&&(lt=!0),ls(e,t),wr(t))throw e}function nn(e,t,r=!0){var n=e.reactions;if(n!==null)for(var a=0;a<n.length;a++){var s=n[a];B!=null&&B.includes(e)||((s.f&ne)!==0?nn(s,t,!1):t===s&&(r?J(s,de):(s.f&V)!==0&&J(s,be),Tt(s)))}}function sn(e){var h;var t=F,r=G,n=Z,a=U,s=pe,i=B,l=D,o=oe,u=e.f;F=null,G=0,Z=null,pe=(u&X)!==0&&(oe||!Te||U===null),U=(u&(_e|qe))===0?e:null,B=null,gr(e.ctx),oe=!1,mt++,e.f|=qt;try{var v=(0,e.fn)(),f=e.deps;if(F!==null){var c;if(pt(e,G),f!==null&&G>0)for(f.length=G+F.length,c=0;c<F.length;c++)f[G+c]=F[c];else e.deps=f=F;if(!pe)for(c=G;c<f.length;c++)((h=f[c]).reactions??(h.reactions=[])).push(e)}else f!==null&&G<f.length&&(pt(e,G),f.length=G);if(at()&&Z!==null&&!oe&&f!==null&&(e.f&(ne|be|de))===0)for(c=0;c<Z.length;c++)nn(Z[c],e);return a!==null&&a!==e&&(mt++,Z!==null&&(n===null?n=Z:n.push(...Z))),v}finally{F=t,G=r,Z=n,U=a,pe=s,B=i,gr(l),oe=o,e.f^=qt}}function is(e,t){let r=t.reactions;if(r!==null){var n=mn.call(r,e);if(n!==-1){var a=r.length-1;a===0?r=t.reactions=null:(r[n]=r[a],r.pop())}}r===null&&(t.f&ne)!==0&&(F===null||!F.includes(t))&&(J(t,be),(t.f&(X|ct))===0&&(t.f^=ct),qr(t),pt(t,0))}function pt(e,t){var r=e.deps;if(r!==null)for(var n=t;n<r.length;n++)is(e,r[n])}function At(e){var t=e.f;if((t&wt)===0){J(e,V);var r=N,n=D,a=Te;N=e,Te=!0;try{(t&Zt)!==0?rs(e):Xr(e),Gr(e);var s=sn(e);e.teardown=typeof s=="function"?s:null,e.wv=tn;var i=e.deps,l}catch(o){Et(o,e,r,n||e.ctx)}finally{Te=a,N=r}}}function us(){try{Cn()}catch(e){if(gt!==null)Et(e,gt,null);else throw e}}function an(){var e=Te;try{var t=0;for(Te=!0;Xe.length>0;){t++>1e3&&us();var r=Xe,n=r.length;Xe=[];for(var a=0;a<n;a++){var s=fs(r[a]);cs(s)}$e.clear()}}finally{ht=!1,Te=e,gt=null}}function cs(e){var t=e.length;if(t!==0)for(var r=0;r<t;r++){var n=e[r];if((n.f&(wt|ce))===0)try{Be(n)&&(At(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null?Jr(n):n.fn=null))}catch(a){Et(a,n,null,n.ctx)}}}function Tt(e){ht||(ht=!0,queueMicrotask(an));for(var t=gt=e;t.parent!==null;){t=t.parent;var r=t.f;if((r&(qe|_e))!==0){if((r&V)===0)return;t.f^=V}}Xe.push(t)}function fs(e){for(var t=[],r=e;r!==null;){var n=r.f,a=(n&(_e|qe))!==0,s=a&&(n&V)!==0;if(!s&&(n&ce)===0){if((n&Dr)!==0)t.push(r);else if(a)r.f^=V;else try{Be(r)&&At(r)}catch(o){Et(o,r,null,r.ctx)}var i=r.first;if(i!==null){r=i;continue}}var l=r.parent;for(r=r.next;r===null&&l!==null;)r=l.next,l=l.parent}return t}function ds(e){for(var t;;){if(ss(),Xe.length===0)return t;ht=!0,an()}}async function vs(){await Promise.resolve(),ds()}function _(e){var t=e.f,r=(t&ne)!==0;if(U!==null&&!oe){if(!(B!=null&&B.includes(e))){var n=U.deps;e.rv<mt&&(e.rv=mt,F===null&&n!==null&&n[G]===e?G++:F===null?F=[e]:(!pe||!F.includes(e))&&F.push(e))}}else if(r&&e.deps===null&&e.effects===null){var a=e,s=a.parent;s!==null&&(s.f&X)===0&&(a.f^=X)}return r&&(a=e,Be(a)&&jr(a)),Fe&&$e.has(e)?$e.get(e):e.v}function ve(e){var t=oe;try{return oe=!0,e()}finally{oe=t}}const _s=-7169;function J(e,t){e.f=e.f&_s|t}function on(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(fe in e)jt(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&fe in r&&jt(r)}}}function jt(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let n in e)try{jt(e[n],t)}catch{}const r=Xt(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const n=Rr(r);for(let a in n){const s=n[a].get;if(s)try{s.call(e)}catch{}}}}}const hs=["touchstart","touchmove"];function gs(e){return hs.includes(e)}let br=!1;function ms(){br||(br=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const r of e.target.elements)(t=r.__on_r)==null||t.call(r)})},{capture:!0}))}function ln(e){var t=U,r=N;le(null),we(null);try{return e()}finally{le(t),we(r)}}function un(e,t,r,n=r){e.addEventListener(t,()=>ln(r));const a=e.__on_r;a?e.__on_r=()=>{a(),n(!0)}:e.__on_r=()=>n(!0),ms()}const cn=new Set,Ht=new Set;function ps(e,t,r,n={}){function a(s){if(n.capture||Ge.call(t,s),!s.cancelBubble)return ln(()=>r==null?void 0:r.call(this,s))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?_t(()=>{t.addEventListener(e,a,n)}):t.addEventListener(e,a,n),a}function nr(e,t,r,n,a){var s={capture:n,passive:a},i=ps(e,t,r,s);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&St(()=>{t.removeEventListener(e,i,s)})}function Ve(e){for(var t=0;t<e.length;t++)cn.add(e[t]);for(var r of Ht)r(e)}function Ge(e){var S;var t=this,r=t.ownerDocument,n=e.type,a=((S=e.composedPath)==null?void 0:S.call(e))||[],s=a[0]||e.target,i=0,l=e.__root;if(l){var o=a.indexOf(l);if(o!==-1&&(t===document||t===window)){e.__root=t;return}var u=a.indexOf(t);if(u===-1)return;o<=u&&(i=o)}if(s=a[i]||e.target,s!==t){Ir(e,"currentTarget",{configurable:!0,get(){return s||r}});var v=U,f=N;le(null),we(null);try{for(var c,h=[];s!==null;){var y=s.assignedSlot||s.parentNode||s.host||null;try{var x=s["__"+n];if(x!=null&&(!s.disabled||e.target===s))if(Wt(x)){var[p,...g]=x;p.apply(s,[e,...g])}else x.call(s,e)}catch(m){c?h.push(m):c=m}if(e.cancelBubble||y===t||y===null)break;s=y}if(c){for(let m of h)queueMicrotask(()=>{throw m});throw c}}finally{e.__root=t,delete e.currentTarget,le(v),we(f)}}}function fn(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function xt(e,t){var r=N;r.nodes_start===null&&(r.nodes_start=e,r.nodes_end=t)}function L(e,t){var r=(t&Bn)!==0,n,a=!e.startsWith("<!>");return()=>{n===void 0&&(n=fn(a?e:"<!>"+e),n=Ae(n));var s=r||Br?document.importNode(n,!0):n.cloneNode(!0);return xt(s,s),s}}function Ze(e=""){{var t=$t(e+"");return xt(t,t),t}}function Mt(){var e=document.createDocumentFragment(),t=document.createComment(""),r=$t();return e.append(t,r),xt(t,r),e}function T(e,t){e!==null&&e.before(t)}function j(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=r,e.nodeValue=r+"")}function ys(e,t){return ws(e,t)}const Le=new Map;function ws(e,{target:t,anchor:r,props:n={},events:a,context:s,intro:i=!0}){Zn();var l=new Set,o=f=>{for(var c=0;c<f.length;c++){var h=f[c];if(!l.has(h)){l.add(h);var y=gs(h);t.addEventListener(h,Ge,{passive:y});var x=Le.get(h);x===void 0?(document.addEventListener(h,Ge,{passive:y}),Le.set(h,1)):Le.set(h,x+1)}}};o(Gt(cn)),Ht.add(o);var u=void 0,v=es(()=>{var f=r??t.appendChild($t());return rt(()=>{if(s){se({});var c=D;c.c=s}a&&(n.$$events=a),u=e(f,n)||{},s&&ae()}),()=>{var y;for(var c of l){t.removeEventListener(c,Ge);var h=Le.get(c);--h===0?(document.removeEventListener(c,Ge),Le.delete(c)):Le.set(c,h)}Ht.delete(o),f!==r&&((y=f.parentNode)==null||y.removeChild(f))}});return bs.set(u,v),u}let bs=new WeakMap;function R(e,t,[r,n]=[0,0]){var a=e,s=null,i=null,l=Y,o=r>0?Jt:0,u=!1;const v=(c,h=!0)=>{u=!0,f(h,c)},f=(c,h)=>{l!==(l=c)&&(l?(s?vt(s):h&&(s=rt(()=>h(a))),i&&dt(i,()=>{i=null})):(i?vt(i):h&&(i=rt(()=>h(a,[r+1,n]))),s&&dt(s,()=>{s=null})))};tr(()=>{u=!1,t(v),u||f(null,null)},o)}function sr(e,t){return t}function ks(e,t,r,n){for(var a=[],s=t.length,i=0;i<s;i++)rr(t[i].e,a,!0);var l=s>0&&a.length===0&&r!==null;if(l){var o=r.parentNode;Jn(o),o.append(r),n.clear(),ge(e,t[0].prev,t[s-1].next)}Qr(a,()=>{for(var u=0;u<s;u++){var v=t[u];l||(n.delete(v.k),ge(e,v.prev,v.next)),ye(v.e,!l)}})}function ar(e,t,r,n,a,s=null){var i=e,l={flags:t,items:new Map,first:null},o=null,u=!1,v=Ee(()=>{var f=r();return Wt(f)?f:f==null?[]:Gt(f)});tr(()=>{var f=_(v),c=f.length;u&&c===0||(u=c===0,Ss(f,l,i,a,t,n,r),s!==null&&(c===0?o?vt(o):o=rt(()=>s(i)):o!==null&&dt(o,()=>{o=null})),_(v))})}function Ss(e,t,r,n,a,s,i){var l=e.length,o=t.items,u=t.first,v=u,f,c=null,h=[],y=[],x,p,g,S;for(S=0;S<l;S+=1){if(x=e[S],p=s(x,S),g=o.get(p),g===void 0){var m=v?v.e.nodes_start:r;c=As(m,t,c,c===null?t.first:c.next,x,p,S,n,a,i),o.set(p,c),h=[],y=[],v=c.next;continue}if(Es(g,x,S),(g.e.f&ce)!==0&&vt(g.e),g!==v){if(f!==void 0&&f.has(g)){if(h.length<y.length){var M=y[0],d;c=M.prev;var k=h[0],w=h[h.length-1];for(d=0;d<h.length;d+=1)kr(h[d],M,r);for(d=0;d<y.length;d+=1)f.delete(y[d]);ge(t,k.prev,w.next),ge(t,c,k),ge(t,w,M),v=M,c=w,S-=1,h=[],y=[]}else f.delete(g),kr(g,v,r),ge(t,g.prev,g.next),ge(t,g,c===null?t.first:c.next),ge(t,c,g),c=g;continue}for(h=[],y=[];v!==null&&v.k!==p;)(v.e.f&ce)===0&&(f??(f=new Set)).add(v),y.push(v),v=v.next;if(v===null)continue;g=v}h.push(g),c=g,v=g.next}if(v!==null||f!==void 0){for(var E=f===void 0?[]:Gt(f);v!==null;)(v.e.f&ce)===0&&E.push(v),v=v.next;var O=E.length;if(O>0){var H=null;ks(t,E,H,o)}}N.first=t.first&&t.first.e,N.last=c&&c.e}function Es(e,t,r,n){Hr(e.v,t),e.i=r}function As(e,t,r,n,a,s,i,l,o,u){var v=(o&On)!==0,f=(o&zn)===0,c=v?f?Ue(a):et(a):a,h=(o&Un)===0?i:et(i),y={i:h,v:c,k:s,a:null,e:null,prev:r,next:n};try{return y.e=rt(()=>l(e,c,h,u),Xn),y.e.prev=r&&r.e,y.e.next=n&&n.e,r===null?t.first=y:(r.next=y,r.e.next=y.e),n!==null&&(n.prev=y,n.e.prev=y.e),y}finally{}}function kr(e,t,r){for(var n=e.next?e.next.e.nodes_start:r,a=t?t.e.nodes_start:r,s=e.e.nodes_start;s!==n;){var i=bt(s);a.before(s),s=i}}function ge(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function Ft(e,t,r=!1,n=!1,a=!1){var s=e,i="";q(()=>{var l=N;if(i!==(i=t()??"")&&(l.nodes_start!==null&&(Zr(l.nodes_start,l.nodes_end),l.nodes_start=l.nodes_end=null),i!=="")){var o=i+"";r?o=`<svg>${o}</svg>`:n&&(o=`<math>${o}</math>`);var u=fn(o);if((r||n)&&(u=Ae(u)),xt(Ae(u),u.lastChild),r||n)for(;Ae(u);)s.before(Ae(u));else s.before(u)}})}const Sr=[...` 	
\r\f \v\uFEFF`];function Ts(e,t,r){var n=e==null?"":""+e;if(t&&(n=n?n+" "+t:t),r){for(var a in r)if(r[a])n=n?n+" "+a:a;else if(n.length)for(var s=a.length,i=0;(i=n.indexOf(a,i))>=0;){var l=i+s;(i===0||Sr.includes(n[i-1]))&&(l===n.length||Sr.includes(n[l]))?n=(i===0?"":n.substring(0,i))+n.substring(l+1):i=l}}return n===""?null:n}function xs(e,t){return e==null?null:String(e)}function ie(e,t,r,n,a,s){var i=e.__className;if(i!==r||i===void 0){var l=Ts(r,n,s);l==null?e.removeAttribute("class"):e.className=l,e.__className=r}else if(s&&a!==s)for(var o in s){var u=!!s[o];(a==null||u!==!!a[o])&&e.classList.toggle(o,u)}return s}function Ms(e,t,r,n){var a=e.__style;if(a!==t){var s=xs(t);s==null?e.removeAttribute("style"):e.style.cssText=s,e.__style=t}return n}const Cs=Symbol("is custom element"),Ls=Symbol("is html");function or(e,t,r,n){var a=Ps(e);a[t]!==(a[t]=r)&&(t==="loading"&&(e[An]=r),r==null?e.removeAttribute(t):typeof r!="string"&&Is(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function Ps(e){return e.__attributes??(e.__attributes={[Cs]:e.nodeName.includes("-"),[Ls]:e.namespaceURI===Vn})}var Er=new Map;function Is(e){var t=Er.get(e.nodeName);if(t)return t;Er.set(e.nodeName,t=[]);for(var r,n=e,a=Element.prototype;a!==n;){r=Rr(n);for(var s in r)r[s].set&&t.push(s);n=Xt(n)}return t}function Bt(e,t,r=t){var n=at();un(e,"input",a=>{var s=a?e.defaultValue:e.value;if(s=Ut(e)?zt(s):s,r(s),n&&s!==(s=t())){var i=e.selectionStart,l=e.selectionEnd;e.value=s??"",l!==null&&(e.selectionStart=i,e.selectionEnd=Math.min(l,e.value.length))}}),ve(t)==null&&e.value&&r(Ut(e)?zt(e.value):e.value),He(()=>{var a=t();Ut(e)&&a===zt(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}const Ot=new Set;function Ar(e,t,r,n,a=n){var s=r.getAttribute("type")==="checkbox",i=e;if(t!==null)for(var l of t)i=i[l]??(i[l]=[]);i.push(r),un(r,"change",()=>{var o=r.__value;s&&(o=Rs(i,o,r.checked)),a(o)},()=>a(s?[]:null)),He(()=>{var o=n();s?(o=o||[],r.checked=o.includes(r.__value)):r.checked=Yn(r.__value,o)}),St(()=>{var o=i.indexOf(r);o!==-1&&i.splice(o,1)}),Ot.has(i)||(Ot.add(i),_t(()=>{i.sort((o,u)=>o.compareDocumentPosition(u)===4?-1:1),Ot.delete(i)})),_t(()=>{})}function Rs(e,t,r){for(var n=new Set,a=0;a<e.length;a+=1)e[a].checked&&n.add(e[a].__value);return r||n.delete(t),Array.from(n)}function Ut(e){var t=e.type;return t==="number"||t==="range"}function zt(e){return e===""?null:+e}function Tr(e,t){return e===t||(e==null?void 0:e[fe])===t}function lr(e={},t,r,n){return er(()=>{var a,s;return He(()=>{a=s,s=[],ve(()=>{e!==r(...s)&&(t(e,...s),a&&Tr(r(...a),e)&&t(null,...a))})}),()=>{_t(()=>{s&&Tr(r(...s),e)&&t(null,...s)})}}),e}function dn(e=!1){const t=D,r=t.l.u;if(!r)return;let n=()=>on(t.s);if(e){let a=0,s={};const i=Qe(()=>{let l=!1;const o=t.s;for(const u in o)o[u]!==s[u]&&(s[u]=o[u],l=!0);return l&&a++,a});n=()=>_(i)}r.b.length&&$n(()=>{xr(t,n),it(r.b)}),ft(()=>{const a=ve(()=>r.m.map(wn));return()=>{for(const s of a)typeof s=="function"&&s()}}),r.a.length&&ft(()=>{xr(t,n),it(r.a)})}function xr(e,t){if(e.l.s)for(const r of e.l.s)_(r);t()}function vn(e,t,r){if(e==null)return t(void 0),Oe;const n=ve(()=>e.subscribe(t,r));return n.unsubscribe?()=>n.unsubscribe():n}const Pe=[];function Me(e,t=Oe){let r=null;const n=new Set;function a(l){if(Ur(e,l)&&(e=l,r)){const o=!Pe.length;for(const u of n)u[1](),Pe.push(u,e);if(o){for(let u=0;u<Pe.length;u+=2)Pe[u][0](Pe[u+1]);Pe.length=0}}}function s(l){a(l(e))}function i(l,o=Oe){const u=[l,o];return n.add(u),n.size===1&&(r=t(a,s)||Oe),l(e),()=>{n.delete(u),n.size===0&&r&&(r(),r=null)}}return{set:a,update:s,subscribe:i}}function Ds(e){let t;return vn(e,r=>t=r)(),t}let ot=!1,Vt=Symbol();function re(e,t,r){const n=r[t]??(r[t]={store:null,source:Ue(void 0),unsubscribe:Oe});if(n.store!==e&&!(Vt in r))if(n.unsubscribe(),n.store=e??null,e==null)n.source.v=void 0,n.unsubscribe=Oe;else{var a=!0;n.unsubscribe=vn(e,s=>{a?n.source.v=s:A(n.source,s)}),a=!1}return e&&Vt in r?Ds(e):_(n.source)}function Ye(){const e={};function t(){St(()=>{for(var r in e)e[r].unsubscribe();Ir(e,Vt,{enumerable:!1,value:!0})})}return[e,t]}function Ns(e){var t=ot;try{return ot=!1,[e(),ot]}finally{ot=t}}function Mr(e){var t;return((t=e.ctx)==null?void 0:t.d)??!1}function me(e,t,r,n){var k;var a=(r&qn)!==0,s=!Ke||(r&Kn)!==0,i=(r&Hn)!==0,l=(r&Fn)!==0,o=!1,u;i?[u,o]=Ns(()=>e[t]):u=e[t];var v=fe in e||En in e,f=i&&(((k=Ne(e,t))==null?void 0:k.set)??(v&&t in e&&(w=>e[t]=w)))||void 0,c=n,h=!0,y=!1,x=()=>(y=!0,h&&(h=!1,l?c=ve(n):c=n),c);u===void 0&&n!==void 0&&(f&&s&&Pn(),u=x(),f&&f(u));var p;if(s)p=()=>{var w=e[t];return w===void 0?x():(h=!0,y=!1,w)};else{var g=(a?Qe:Ee)(()=>e[t]);g.f|=kn,p=()=>{var w=_(g);return w!==void 0&&(c=void 0),w===void 0?c:w}}if((r&jn)===0&&s)return p;if(f){var S=e.$$legacy;return function(w,E){return arguments.length>0?((!s||!E||S||o)&&f(E?p():w),w):p()}}var m=!1,M=Ue(u),d=Qe(()=>{var w=p(),E=_(M);return m?(m=!1,E):M.v=w});return i&&_(d),a||(d.equals=Qt),function(w,E){if(arguments.length>0){const O=E?_(d):s&&i?Se(w):w;if(!d.equals(O)){if(m=!0,A(M,O),y&&c!==void 0&&(c=O),Mr(d))return w;ve(()=>_(d))}return w}return Mr(d)?d.v:_(d)}}function ir(e){D===null&&zr(),Ke&&D.l!==null?_n(D).m.push(e):ft(()=>{const t=ve(e);if(typeof t=="function")return t})}function Os(e){D===null&&zr(),D.l===null&&Ln(),_n(D).a.push(e)}function _n(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const Us="5";var Pr;typeof window<"u"&&((Pr=window.__svelte??(window.__svelte={})).v??(Pr.v=new Set)).add(Us);const Ct=Me({isAuthenticated:!1,status:"Authentication required",method:null,userApiKey:null,sessionToken:null}),ur=Me({available:[],selected:null,selectedInfo:{name:"whoami",provider:"",contextSize:128e3},isLoading:!1}),cr=Me({available:[],selected:null,selectedInfo:{name:"🤖 General Assistant",description:"General purpose AI assistant"},isLoading:!1}),fr=Me([]),zs=Me({usage:"--",maxSize:128e3,currentSize:0,percentage:0,lastTokenUsage:null}),xe=Me({isLoading:!1,currentView:"chat",error:null,showSystemMessage:!0}),qs=Me({isInitialized:!1,version:"1.0.0",lastUpdate:null});function Je(e){Ct.update(t=>({...t,...e}))}function Re(e){ur.update(t=>({...t,...e}))}function De(e){cr.update(t=>({...t,...e}))}function Ie(e){fr.update(t=>[...t,e])}function hn(e){zs.update(t=>({...t,...e}))}function st(e){xe.update(t=>({...t,error:e}))}function Cr(){xe.update(e=>({...e,error:null}))}function ze(e){xe.update(t=>({...t,isLoading:e}))}var Ks=L('<div class="chat-header svelte-umztmj"><div class="chat-title svelte-umztmj"><button aria-label="Select model"> </button> <button class="role-title svelte-umztmj" aria-label="Select role"> </button></div> <div class="header-right svelte-umztmj"><div class="header-info svelte-umztmj"><div class="context-info svelte-umztmj"> </div> <div class="auth-status svelte-umztmj"><!></div></div></div></div>');function js(e,t){se(t,!0);const[r,n]=Ye(),a=()=>re(Ct,"$authStore",r),s=()=>re(ur,"$modelsStore",r),i=()=>re(cr,"$rolesStore",r);var l=Ks(),o=b(l),u=b(o);let v;u.__click=function(...k){var w;(w=t.onModelClick)==null||w.apply(this,k)};var f=b(u),c=C(u,2);c.__click=function(...k){var w;(w=t.onRoleClick)==null||w.apply(this,k)};var h=b(c),y=C(o,2),x=b(y),p=b(x),g=b(p),S=C(p,2),m=b(S);{var M=k=>{var w=Ze("Server Key");T(k,w)},d=k=>{var w=Ze();q(()=>j(w,a().status)),T(k,w)};R(m,k=>{a().isAuthenticated?k(M):k(d,!1)})}q((k,w)=>{v=ie(u,1,"model-title svelte-umztmj",null,v,k),j(f,s().selectedInfo.name),j(h,i().selectedInfo.name),j(g,`Context: ${w??""}K`)},[()=>({authenticated:a().isAuthenticated}),()=>Math.round(s().selectedInfo.contextSize/1e3)]),T(e,l),ae(),n()}Ve(["click"]);Nn();var Hs=L('<span class="message-label svelte-1kg7gi5"> </span>'),Fs=L('<span class="message-label svelte-1kg7gi5"> </span>'),Bs=L("<div><!></div>");function Vs(e,t){se(t,!0);let r=me(t,"model",3,"");function n(o){return new Date(o).toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!0})}var a=Bs(),s=b(a);{var i=o=>{var u=Hs(),v=b(u);q(f=>j(v,`[USER] ${f??""}`),[()=>n(t.timestamp)]),T(o,u)},l=o=>{var u=Fs(),v=b(u);q(f=>j(v,`[ASSISTANT] ${f??""}${r()?` - ${r()}`:""}`),[()=>n(t.timestamp)]),T(o,u)};R(s,o=>{t.role==="user"?o(i):o(l,!1)})}q(()=>ie(a,1,`message-header ${t.role??""}`,"svelte-1kg7gi5")),T(e,a),ae()}var Ys=L("<div><!></div>");function Lr(e,t){se(t,!1);let r=me(t,"content",8,""),n=me(t,"role",8,"assistant"),a=Ue(),s=Ue("");function i(p){const g=document.createElement("div");return g.textContent=p,g.innerHTML}function l(p,g){const S=window.hljs;if(!S)return console.warn("highlight.js not available"),i(p);try{if(g&&S.getLanguage(g)){const m=S.highlight(p.trim(),{language:g});return console.log("Code highlighting successful for",g),m.value}else{const m=S.highlightAuto(p.trim());return console.log("Auto-highlighting successful, detected language:",m.language),m.value}}catch(m){return console.warn("Code highlighting failed:",m),i(p)}}function o(p){if(!p)return"";const g=window.marked,S=window.hljs;if(g&&S){g.setOptions({breaks:!0,gfm:!0,highlight(m,M){return l(m,M)}});try{const m=g.parse(p);return console.log("Markdown parsing successful"),m}catch(m){return console.warn("Markdown parsing failed:",m),u(p)}}return console.warn("marked not available, using fallback"),u(p)}function u(p){return p.replace(/```(\w+)?\n([\s\S]*?)```/g,(g,S,m)=>{const M=l(m,S);return`<pre><code class="language-${S||"text"} hljs">${M}</code></pre>`}).replace(/`([^`]+)`/g,"<code>$1</code>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/\n/g,"<br>")}function v(p){var m;const g=p.target,S=(m=g.closest(".code-block-container"))==null?void 0:m.querySelector("code");S&&navigator.clipboard.writeText(S.textContent||"").then(()=>{g.textContent="✓",setTimeout(()=>{g.textContent="copy"},1e3)})}async function f(){if(await vs(),!_(a))return;_(a).querySelectorAll("pre:not(.processed)").forEach(g=>{var M;const S=document.createElement("div");S.className="code-block-container";const m=document.createElement("button");m.className="copy-code-btn",m.textContent="copy",m.title="Copy code",m.addEventListener("click",v),(M=g.parentNode)==null||M.insertBefore(S,g),S.appendChild(m),S.appendChild(g),g.classList.add("processed")})}function c(){A(s,o(r()))}ir(()=>{c()}),pr(()=>on(r()),()=>{r()&&c()}),pr(()=>(_(s),_(a)),()=>{_(s)&&_(a)&&f()}),ts(),dn();var h=Ys();let y;var x=b(h);Ft(x,()=>_(s)),lr(h,p=>A(a,p),()=>_(a)),q(p=>y=ie(h,1,"code-highlighter svelte-ezov7",null,y,p),[()=>({user:n()==="user",assistant:n()==="assistant"})],Ee),T(e,h),ae()}var Ws=L('<div class="user-message-wrapper svelte-1xhsxcs"><div><!></div></div>'),Gs=L("<div><!></div>");function Xs(e,t){var r=Mt(),n=kt(r);{var a=i=>{var l=Ws(),o=b(l),u=b(o);Lr(u,{get content(){return t.content},get role(){return t.role}}),q(()=>ie(o,1,`message-content ${t.role??""}`,"svelte-1xhsxcs")),T(i,l)},s=i=>{var l=Gs(),o=b(l);Lr(o,{get content(){return t.content},get role(){return t.role}}),q(()=>ie(l,1,`message-content ${t.role??""}`,"svelte-1xhsxcs")),T(i,l)};R(n,i=>{t.role==="user"?i(a):i(s,!1)})}T(e,r)}function Zs(e,t){navigator.clipboard.writeText(t.content).then(()=>{})}var Js=L('<div class="message-footer svelte-sspqos"><div class="token-usage svelte-sspqos"><!></div> <button class="copy-button svelte-sspqos">Copy all</button></div>');function Qs(e,t){se(t,!0);var r=Js(),n=b(r),a=b(n);{var s=o=>{var u=Ze();q((v,f,c)=>j(u,`↑ ${v??""}K ↓ ${f??""}K (total: ${c??""}K)`),[()=>Math.round(t.tokenUsage.prompt_tokens/1e3),()=>Math.round(t.tokenUsage.completion_tokens/1e3),()=>Math.round((t.tokenUsage.total_tokens||t.tokenUsage.prompt_tokens+t.tokenUsage.completion_tokens)/1e3)]),T(o,u)},i=(o,u)=>{{var v=c=>{var h=Ze();q(y=>j(h,`total: ${y??""}K`),[()=>Math.round(t.tokenUsage.total_tokens/1e3)]),T(c,h)},f=(c,h)=>{{var y=x=>{var p=Ze();q((g,S)=>j(p,`↑ ${g??""}K ↓ ${S??""}K`),[()=>Math.round(t.tokenUsage.input/1e3),()=>Math.round(t.tokenUsage.output/1e3)]),T(x,p)};R(c,x=>{t.tokenUsage.input&&t.tokenUsage.output&&x(y)},h)}};R(o,c=>{t.tokenUsage.total_tokens?c(v):c(f,!1)},u)}};R(a,o=>{t.tokenUsage.prompt_tokens&&t.tokenUsage.completion_tokens?o(s):o(i,!1)})}var l=C(n,2);l.__click=[Zs,t],T(e,r),ae()}Ve(["click"]);var $s=L("<div><!> <!> <!></div>");function ea(e,t){let r=me(t,"role",3,"user"),n=me(t,"content",3,""),a=me(t,"timestamp",19,()=>Date.now()),s=me(t,"model",3,""),i=me(t,"tokenUsage",19,()=>({}));var l=$s(),o=b(l);Vs(o,{get role(){return r()},get timestamp(){return a()},get model(){return s()}});var u=C(o,2);Xs(u,{get role(){return r()},get content(){return n()}});var v=C(u,2);{var f=c=>{Qs(c,{get tokenUsage(){return i()},get content(){return n()}})};R(v,c=>{r()==="assistant"&&c(f)})}q(()=>{ie(l,1,`message ${r()??""}`,"svelte-12i571y"),or(l,"data-timestamp",a())}),T(e,l)}var ta=L('<div class="message system svelte-3u4su5"><div class="message-content svelte-3u4su5"><!></div> <div class="message-timestamp svelte-3u4su5"> </div></div>'),ra=L('<div><div class="message-content svelte-3u4su5"><!></div> <div class="message-timestamp svelte-3u4su5"> </div></div>'),na=L('<div class="message assistant loading svelte-3u4su5"><div class="message-content svelte-3u4su5"><div class="loading-dots svelte-3u4su5"><span class="svelte-3u4su5"></span> <span class="svelte-3u4su5"></span> <span class="svelte-3u4su5"></span></div></div></div>'),sa=L('<div class="chat-output svelte-3u4su5"><!> <!> <!></div>');function aa(e,t){se(t,!1);const[r,n]=Ye(),a=()=>re(xe,"$uiStore",r),s=()=>re(Ct,"$authStore",r),i=()=>re(fr,"$messagesStore",r);let l=Ue();function o(){_(l)&&Gn(l,_(l).scrollTop=_(l).scrollHeight)}Os(()=>{o()}),ir(()=>{o()});function u(){return`[SYSTEM] ${new Date().toLocaleString()}

🌟 Choose access method:

🔐 Server Login: /login <password>
🔑 Personal Key: /set-api-key <key>

💡 Choose ONE option`}dn();var v=sa(),f=b(v);{var c=p=>{var g=ta(),S=b(g),m=b(S);Ft(m,()=>u().replace(/\n/g,"<br>"));var M=C(S,2),d=b(M);q(k=>j(d,k),[()=>new Date().toLocaleTimeString()],Ee),T(p,g)};R(f,p=>{a().showSystemMessage&&!s().isAuthenticated&&p(c)})}var h=C(f,2);ar(h,1,i,sr,(p,g)=>{var S=Mt(),m=kt(S);{var M=k=>{var w=ra(),E=b(w),O=b(E);Ft(O,()=>_(g).content.replace(/\n/g,"<br>"));var H=C(E,2),ke=b(H);q(P=>{ie(w,1,`message ${_(g).type??""}`,"svelte-3u4su5"),j(ke,P)},[()=>new Date(_(g).timestamp).toLocaleTimeString()],Ee),T(k,w)},d=k=>{const w=Ee(()=>_(g).model||""),E=Ee(()=>_(g).tokenUsage||{});ea(k,{get role(){return _(g).role},get content(){return _(g).content},get timestamp(){return _(g).timestamp},get model(){return _(w)},get tokenUsage(){return _(E)}})};R(m,k=>{_(g).role==="system"&&_(g).type?k(M):k(d,!1)})}T(p,S)});var y=C(h,2);{var x=p=>{var g=na();T(p,g)};R(y,p=>{a().isLoading&&p(x)})}lr(v,p=>A(l,p),()=>_(l)),T(e,v),ae(),n()}class oa{constructor(){this.userApiKey=null,this.sessionToken=null,this.restoreAuth()}prepareHeaders(t={}){const r={"Content-Type":"application/json",...t};return this.userApiKey&&(r["X-User-API-Key"]=this.userApiKey),this.sessionToken&&(r["X-Session-Token"]=this.sessionToken),console.log("API Headers:",{hasUserApiKey:!!this.userApiKey,hasSessionToken:!!this.sessionToken,sessionToken:this.sessionToken?"exists":"missing"}),r}async request(t,r={}){const{method:n="GET",body:a=null,headers:s={}}=r,i={method:n,headers:this.prepareHeaders(s)};a&&n!=="GET"&&(i.body=typeof a=="string"?a:JSON.stringify(a));try{const l=await fetch(t,i);return{response:l,ok:l.ok,status:l.status}}catch(l){throw l}}async checkAuthStatus(){const{response:t,ok:r,status:n}=await this.request("/api/auth-status");return r?{success:!0,data:await t.json()}:{success:!1,status:n}}async login(t){const{response:r,ok:n,status:a}=await this.request("/api/login",{method:"POST",body:{password:t}});if(n){const s=await r.json();return s.login_success&&s.session_token?(this.sessionToken=s.session_token,sessionStorage.setItem("session_token",s.session_token),console.log("Login success - token saved:",{token:s.session_token?"received":"missing",stored:sessionStorage.getItem("session_token")?"stored":"not stored"}),{success:!0,data:{...s,success:!0,message:s.response}}):s.login_failed?{success:!1,error:s.response||"Login failed",status:a}:{success:!1,error:"Unknown login response",status:a}}else{const s=await r.json().catch(()=>({error:`HTTP ${a}`}));return{success:!1,error:s.response||s.error||`HTTP ${a}`,status:a}}}async setApiKey(t){const{response:r,ok:n,status:a}=await this.request("/api/set-api-key",{method:"POST",body:{apiKey:t}});if(n){const s=await r.json();return s.success&&(this.userApiKey=t,localStorage.setItem("user_api_key",t)),{success:!0,data:s}}else return{success:!1,error:(await r.json().catch(()=>({error:`HTTP ${a}`}))).error||`HTTP ${a}`,status:a}}async getModels(){const{response:t,ok:r,status:n}=await this.request("/api/models");return n===401?{success:!1,error:"Authentication required",status:401}:r?{success:!0,models:(await t.json()).models}:{success:!1,error:`HTTP ${n}`,status:n}}async setModel(t){const{response:r,ok:n,status:a}=await this.request("/api/set-model",{method:"POST",body:{model:t}});if(n){const s=await r.json();return{success:s.success,data:s}}else return{success:!1,error:`HTTP ${a}`,status:a}}async getRoles(){const{response:t,ok:r,status:n}=await this.request("/api/roles");return n===401?{success:!1,error:"Authentication required",status:401}:r?{success:!0,roles:(await t.json()).roles}:{success:!1,error:`HTTP ${n}`,status:n}}async setRole(t){const{response:r,ok:n,status:a}=await this.request("/api/set-role",{method:"POST",body:{role:t}});if(n){const s=await r.json();return{success:s.success,data:s}}else return{success:!1,error:`HTTP ${a}`,status:a}}async sendMessage(t){const{response:r,ok:n,status:a}=await this.request("/api/chat",{method:"POST",body:{message:t}});if(a===401)return{success:!1,error:"Authentication required",status:401};if(n)return{success:!0,data:await r.json()};{let s;try{s=await r.json()}catch{s={error:`HTTP ${a}`}}return{success:!1,error:s.response||s.error||`HTTP ${a}`,status:a}}}async getContextInfo(){const{response:t,ok:r,status:n}=await this.request("/api/context");return r?{success:!0,data:await t.json()}:{success:!1,error:`HTTP ${n}`,status:n}}restoreAuth(){this.sessionToken=sessionStorage.getItem("session_token"),this.userApiKey=localStorage.getItem("user_api_key"),console.log("Auth restored:",{sessionToken:this.sessionToken?"restored":"not found",userApiKey:this.userApiKey?"restored":"not found"})}logout(){this.sessionToken=null,this.userApiKey=null,sessionStorage.removeItem("session_token"),localStorage.removeItem("user_api_key")}}const Q=new oa;async function Yt(){try{ze(!0),Q.restoreAuth(),await la();const e=await Q.checkAuthStatus();e.success&&e.data.authenticated&&await Promise.all([dr(),vr(),_r()]),ia(),qs.update(t=>({...t,isInitialized:!0,lastUpdate:new Date}))}catch(e){console.error("App initialization failed:",e),st("Failed to initialize app: "+e.message)}finally{ze(!1)}}async function la(){try{const e=await Q.checkAuthStatus();if(e.success){const{authenticated:t,method:r,contextUsage:n}=e.data;return Je({isAuthenticated:t,status:t?"Authenticated":"Authentication required",method:r||null}),n&&hn({usage:n}),t}else return Je({isAuthenticated:!1,status:"Authentication required",method:null}),!1}catch(e){return console.error("Auth status check failed:",e),Je({isAuthenticated:!1,status:"Connection error",method:null}),!1}}async function dr(){try{Re({isLoading:!0});const e=await Q.getModels();if(e.success){Re({available:e.models,isLoading:!1});const t=e.models.find(r=>r.selected)||e.models[0];t&&Re({selected:t.id,selectedInfo:{name:t.name,provider:t.provider,contextSize:t.context_length||128e3}})}else console.error("Failed to load models:",e.error),Re({isLoading:!1})}catch(e){console.error("Error loading models:",e),Re({isLoading:!1})}}async function vr(){try{De({isLoading:!0});const e=await Q.getRoles();if(e.success){De({available:e.roles,isLoading:!1});const t=e.roles.find(r=>r.selected)||e.roles[0];t&&De({selected:t.id,selectedInfo:{name:t.name,description:t.description||""}})}else console.error("Failed to load roles:",e.error),De({isLoading:!1})}catch(e){console.error("Error loading roles:",e),De({isLoading:!1})}}async function _r(){try{const e=await Q.getContextInfo();if(e.success){const{usage:t,maxSize:r,currentSize:n}=e.data;hn({usage:t,maxSize:r||128e3,currentSize:n||0,percentage:n&&r?n/r*100:0})}}catch(e){console.error("Error loading context info:",e)}}function ia(){ua()}function ua(){return`[SYSTEM] ${new Date().toLocaleString()}

🌟 Choose access method:

🔐 Server Login: /login <password>
🔑 Personal Key: /set-api-key <key>

💡 Choose ONE option`}async function ca(e){try{ze(!0);const t=await Q.login(e);return t.success?(Je({isAuthenticated:!0,status:"Authenticated via server",method:"server",sessionToken:t.data.token}),await Promise.all([dr(),vr(),_r()]),{success:!0}):(st(t.error||"Login failed"),{success:!1,error:t.error})}catch(t){return console.error("Login error:",t),st("Login failed: "+t.message),{success:!1,error:t.message}}finally{ze(!1)}}async function fa(e){try{ze(!0);const t=await Q.setApiKey(e);return t.success?(Je({isAuthenticated:!0,status:"Authenticated via API key",method:"api-key",userApiKey:e}),await Promise.all([dr(),vr(),_r()]),{success:!0}):(st(t.error||"API key validation failed"),{success:!1,error:t.error})}catch(t){return console.error("API key setup error:",t),st("API key setup failed: "+t.message),{success:!1,error:t.message}}finally{ze(!1)}}function da(e,t){e.key==="Enter"&&!e.shiftKey&&(e.preventDefault(),t())}function va(e,t){t()}var _a=L('<div class="loading-spinner svelte-e5yfmv"></div>'),ha=L('<span class="send-icon svelte-e5yfmv">↑</span>'),ga=L('<div class="input-hint svelte-e5yfmv">Press Enter to send, Shift+Enter for new line</div>'),ma=L('<div class="chat-input-container svelte-e5yfmv"><div class="input-wrapper svelte-e5yfmv"><textarea class="chat-input svelte-e5yfmv" rows="1" autocomplete="off" autocapitalize="off" spellcheck="false" placeholder="Type your message..." aria-label="Chat message input"></textarea> <button aria-label="Send message"><!></button></div> <!></div>');function pa(e,t){se(t,!0);const[r,n]=Ye(),a=()=>re(xe,"$uiStore",r),s=()=>re(fr,"$messagesStore",r);let i=K(""),l=K(void 0);async function o(){var M;const m=_(i).trim();if(!(!m||a().isLoading))try{if(Ie({role:"user",content:m,timestamp:Date.now()}),xe.update(d=>({...d,isLoading:!0})),A(i,""),u(),(M=t.onScrollToBottom)==null||M.call(t),m.startsWith("/login ")){const d=m.substring(7).trim(),k=await Q.login(d);k.success?(Ie({role:"system",content:k.data.message||"Login successful",timestamp:Date.now(),type:"success"}),await Yt()):Ie({role:"system",content:k.error||"Login failed",timestamp:Date.now(),type:"error"})}else{const d=await Q.sendMessage(m);d.success&&d.data?d.data.response&&(console.log("Token usage from API:",d.data.usage),Ie({role:"assistant",content:d.data.response,timestamp:Date.now(),model:d.data.model,tokenUsage:d.data.usage||{}})):Ie({role:"system",content:d.error||"Failed to send message",timestamp:Date.now(),type:"error"})}}catch(d){console.error("Error sending message:",d),Ie({role:"system",content:"Failed to send message: "+d.message,timestamp:Date.now(),type:"error"})}finally{xe.update(d=>({...d,isLoading:!1}))}}function u(){if(!_(l))return;_(l).style.height="auto";const m=Math.min(_(l).scrollHeight,120);_(l).style.height=`${m}px`}ft(()=>{_(i)!==void 0&&_(l)&&u()});var v=ma(),f=b(v),c=b(f);c.__input=[va,u],c.__keydown=[da,o],lr(c,m=>A(l,m),()=>_(l));var h=C(c,2);h.__click=o;var y=b(h);{var x=m=>{var M=_a();T(m,M)},p=m=>{var M=ha();T(m,M)};R(y,m=>{a().isLoading?m(x):m(p,!1)})}var g=C(f,2);{var S=m=>{var M=ga();T(m,M)};R(g,m=>{s().length===0&&m(S)})}q((m,M)=>{c.disabled=a().isLoading,ie(h,1,`send-button ${m??""}`,"svelte-e5yfmv"),h.disabled=M},[()=>!_(i).trim()||a().isLoading?"disabled":"",()=>!_(i).trim()||a().isLoading]),Bt(c,()=>_(i),m=>A(i,m)),T(e,v),ae(),n()}Ve(["input","keydown","click"]);function ya(e,t){e.target===e.currentTarget&&t()}var wa=L('<div class="auth-form svelte-1r920as"><label for="password" class="svelte-1r920as">Server Password:</label> <input id="password" type="password" placeholder="Enter server password" class="svelte-1r920as"/> <button class="auth-submit-btn svelte-1r920as"> </button></div>'),ba=L('<div class="auth-form svelte-1r920as"><label for="api-key" class="svelte-1r920as">OpenRouter API Key:</label> <input id="api-key" type="password" placeholder="sk-or-v1-..." class="svelte-1r920as"/> <small class="api-key-help svelte-1r920as">Get your API key from <a href="https://openrouter.ai/settings/keys" target="_blank" class="svelte-1r920as">OpenRouter</a></small> <button class="auth-submit-btn svelte-1r920as"> </button></div>'),ka=L('<div class="auth-error svelte-1r920as"> </div>'),Sa=L('<div class="auth-modal-backdrop svelte-1r920as" role="dialog" aria-modal="true" aria-labelledby="auth-modal-title" tabindex="0"><div class="auth-modal-content svelte-1r920as"><div class="auth-modal-header svelte-1r920as"><h3 id="auth-modal-title" class="svelte-1r920as">🔐 Choose Authentication Method</h3> <button class="auth-modal-close svelte-1r920as" aria-label="Close">&times;</button></div> <div class="auth-modal-body svelte-1r920as"><div class="auth-method-selector svelte-1r920as"><label class="auth-method-option svelte-1r920as"><input type="radio" class="svelte-1r920as"/> <span class="auth-method-label svelte-1r920as">🔐 Server Login <small class="svelte-1r920as">Authenticate with server password</small></span></label> <label class="auth-method-option svelte-1r920as"><input type="radio" class="svelte-1r920as"/> <span class="auth-method-label svelte-1r920as">🔑 Personal API Key <small class="svelte-1r920as">Use your own OpenRouter API key</small></span></label></div> <!> <!> <!></div></div></div>');function Ea(e,t){se(t,!0);const r=[];let n=K("server"),a=K(""),s=K(""),i=K(!1),l=K("");function o(){var P;(P=t.onClose)==null||P.call(t)}async function u(){var I;if(!_(a).trim()){A(l,"Please enter password");return}A(i,!0),A(l,""),Cr();const P=await ca(_(a));P.success?(I=t.onSuccess)==null||I.call(t,{method:"server"}):A(l,P.error||"Login failed",!0),A(i,!1)}async function v(){var I;if(!_(s).trim()){A(l,"Please enter API key");return}if(!_(s).startsWith("sk-or-v1-")){A(l,"Invalid API key format. Must start with sk-or-v1-");return}A(i,!0),A(l,""),Cr();const P=await fa(_(s));P.success?(I=t.onSuccess)==null||I.call(t,{method:"api-key"}):A(l,P.error||"API key validation failed",!0),A(i,!1)}function f(P){P.key==="Escape"?o():P.key==="Enter"&&(_(n)==="server"?u():v())}var c=Sa();nr("keydown",tt,f),c.__click=[ya,o],c.__keydown=f;var h=b(c),y=b(h),x=C(b(y),2);x.__click=o;var p=C(y,2),g=b(p),S=b(g),m=b(S);m.value=m.__value="server";var M=C(S,2),d=b(M);d.value=d.__value="api-key";var k=C(g,2);{var w=P=>{var I=wa(),z=C(b(I),2),W=C(z,2);W.__click=u;var ue=b(W);q($=>{z.disabled=_(i),W.disabled=$,j(ue,_(i)?"Logging in...":"Login")},[()=>_(i)||!_(a).trim()]),Bt(z,()=>_(a),$=>A(a,$)),T(P,I)};R(k,P=>{_(n)==="server"&&P(w)})}var E=C(k,2);{var O=P=>{var I=ba(),z=C(b(I),2),W=C(z,4);W.__click=v;var ue=b(W);q($=>{z.disabled=_(i),W.disabled=$,j(ue,_(i)?"Validating...":"Set API Key")},[()=>_(i)||!_(s).trim()]),Bt(z,()=>_(s),$=>A(s,$)),T(P,I)};R(E,P=>{_(n)==="api-key"&&P(O)})}var H=C(E,2);{var ke=P=>{var I=ka(),z=b(I);q(()=>j(z,_(l))),T(P,I)};R(H,P=>{_(l)&&P(ke)})}Ar(r,[],m,()=>_(n),P=>A(n,P)),Ar(r,[],d,()=>_(n),P=>A(n,P)),T(e,c),ae()}Ve(["click","keydown"]);function Aa(e,t){e.target===e.currentTarget&&t()}var Ta=L('<div class="model-list-loading svelte-1g6d7lz"><div class="loading-spinner svelte-1g6d7lz"></div> Loading models...</div>'),xa=L('<div class="model-list-empty svelte-1g6d7lz">No models available. Please check your authentication.</div>'),Ma=(e,t,r)=>t(_(r).id),Ca=L('<span class="model-context svelte-1g6d7lz"> </span>'),La=L('<span class="model-selected-indicator svelte-1g6d7lz">✓</span>'),Pa=L('<button><div class="model-info svelte-1g6d7lz"><div class="model-name svelte-1g6d7lz"> </div> <div class="model-details svelte-1g6d7lz"><span class="model-provider svelte-1g6d7lz"> </span> <!></div></div> <!></button>'),Ia=L('<div class="model-modal-loading svelte-1g6d7lz">Setting model...</div>'),Ra=L('<div class="model-modal-backdrop svelte-1g6d7lz" role="dialog" aria-modal="true" aria-labelledby="model-modal-title" tabindex="0"><div class="model-modal-content svelte-1g6d7lz"><div class="model-modal-header svelte-1g6d7lz"><h3 id="model-modal-title" class="svelte-1g6d7lz">🤖 Select Model</h3> <button class="model-modal-close svelte-1g6d7lz" aria-label="Close">&times;</button></div> <div class="model-list svelte-1g6d7lz"><!></div> <!></div></div>');function Da(e,t){se(t,!0);const[r,n]=Ye(),a=()=>re(ur,"$modelsStore",r);let s=K(!1);function i(){var d;(d=t.onClose)==null||d.call(t)}async function l(d){var k;try{A(s,!0);const w=await Q.setModel(d);if(w.success){const E=a().available.find(O=>O.id===d);E&&Re({selected:d,selectedInfo:{name:E.name,provider:E.provider,contextSize:E.context_length||128e3}}),(k=t.onSelect)==null||k.call(t,{modelId:d})}else console.error("Failed to set model:",w.error)}catch(w){console.error("Error selecting model:",w)}finally{A(s,!1)}}function o(d){d.key==="Escape"&&i()}function u(d){return d?d.name||d.id||"Unknown Model":""}function v(d){const k={openai:"#00a67e",anthropic:"#d4a574",google:"#4285f4",meta:"#1877f2",mistral:"#ff7000",cohere:"#39594c",default:"#666"};return k[d==null?void 0:d.toLowerCase()]||k.default}var f=Ra();nr("keydown",tt,o),f.__click=[Aa,i],f.__keydown=o;var c=b(f),h=b(c),y=C(b(h),2);y.__click=i;var x=C(h,2),p=b(x);{var g=d=>{var k=Ta();T(d,k)},S=(d,k)=>{{var w=O=>{var H=xa();T(O,H)},E=O=>{var H=Mt(),ke=kt(H);ar(ke,1,()=>a().available,sr,(P,I)=>{var z=Pa();z.__click=[Ma,l,I];var W=b(z),ue=b(W),$=b(ue),Lt=C(ue,2),We=b(Lt),Pt=b(We),It=C(We,2);{var ee=te=>{var Ce=Ca(),Dt=b(Ce);q(gn=>j(Dt,`${gn??""} tokens`),[()=>_(I).context_length.toLocaleString()]),T(te,Ce)};R(It,te=>{_(I).context_length&&te(ee)})}var he=C(W,2);{var Rt=te=>{var Ce=La();T(te,Ce)};R(he,te=>{_(I).id===a().selected&&te(Rt)})}q((te,Ce,Dt)=>{ie(z,1,`model-list-item ${_(I).id===a().selected?"selected":""}`,"svelte-1g6d7lz"),z.disabled=_(s),or(z,"aria-label",`Select ${te??""}`),j($,Ce),Ms(We,`color: ${Dt??""}`),j(Pt,_(I).provider||"Unknown")},[()=>u(_(I)),()=>u(_(I)),()=>v(_(I).provider)]),T(P,z)}),T(O,H)};R(d,O=>{a().available.length===0?O(w):O(E,!1)},k)}};R(p,d=>{a().isLoading?d(g):d(S,!1)})}var m=C(x,2);{var M=d=>{var k=Ia();T(d,k)};R(m,d=>{_(s)&&d(M)})}T(e,f),ae(),n()}Ve(["click","keydown"]);function Na(e,t){e.target===e.currentTarget&&t()}var Oa=L('<div class="role-list-loading svelte-7tpvfm"><div class="loading-spinner svelte-7tpvfm"></div> Loading roles...</div>'),Ua=L('<div class="role-list-empty svelte-7tpvfm">No roles available. Please check your authentication.</div>'),za=(e,t,r)=>t(_(r).id),qa=L('<div class="role-description svelte-7tpvfm"> </div>'),Ka=L('<span class="role-selected-indicator svelte-7tpvfm">✓</span>'),ja=L('<button><div class="role-info svelte-7tpvfm"><div class="role-name svelte-7tpvfm"> </div> <!></div> <!></button>'),Ha=L('<div class="role-modal-loading svelte-7tpvfm">Setting role...</div>'),Fa=L('<div class="role-modal-backdrop svelte-7tpvfm" role="dialog" aria-modal="true" aria-labelledby="role-modal-title" tabindex="0"><div class="role-modal-content svelte-7tpvfm"><div class="role-modal-header svelte-7tpvfm"><h3 id="role-modal-title" class="svelte-7tpvfm">🎭 Select Role</h3> <button class="role-modal-close svelte-7tpvfm" aria-label="Close">&times;</button></div> <div class="role-list svelte-7tpvfm"><!></div> <!></div></div>');function Ba(e,t){se(t,!0);const[r,n]=Ye(),a=()=>re(cr,"$rolesStore",r);let s=K(!1);function i(){var d;(d=t.onClose)==null||d.call(t)}async function l(d){var k;try{A(s,!0);const w=await Q.setRole(d);if(w.success){const E=a().available.find(O=>O.id===d);E&&De({selected:d,selectedInfo:{name:E.name,description:E.description,system_prompt:E.system_prompt}}),(k=t.onSelect)==null||k.call(t,{roleId:d})}else console.error("Failed to set role:",w.error)}catch(w){console.error("Error selecting role:",w)}finally{A(s,!1)}}function o(d){d.key==="Escape"&&i()}function u(d){return d?d.name||d.id||"Unknown Role":""}function v(d){return d?d.length>100?d.substring(0,100)+"...":d:""}var f=Fa();nr("keydown",tt,o),f.__click=[Na,i],f.__keydown=o;var c=b(f),h=b(c),y=C(b(h),2);y.__click=i;var x=C(h,2),p=b(x);{var g=d=>{var k=Oa();T(d,k)},S=(d,k)=>{{var w=O=>{var H=Ua();T(O,H)},E=O=>{var H=Mt(),ke=kt(H);ar(ke,1,()=>a().available,sr,(P,I)=>{var z=ja();z.__click=[za,l,I];var W=b(z),ue=b(W),$=b(ue),Lt=C(ue,2);{var We=ee=>{var he=qa(),Rt=b(he);q(te=>j(Rt,te),[()=>v(_(I).description)]),T(ee,he)};R(Lt,ee=>{_(I).description&&ee(We)})}var Pt=C(W,2);{var It=ee=>{var he=Ka();T(ee,he)};R(Pt,ee=>{_(I).id===a().selected&&ee(It)})}q((ee,he)=>{ie(z,1,`role-list-item ${_(I).id===a().selected?"selected":""}`,"svelte-7tpvfm"),z.disabled=_(s),or(z,"aria-label",`Select ${ee??""}`),j($,he)},[()=>u(_(I)),()=>u(_(I))]),T(P,z)}),T(O,H)};R(d,O=>{a().available.length===0?O(w):O(E,!1)},k)}};R(p,d=>{a().isLoading?d(g):d(S,!1)})}var m=C(x,2);{var M=d=>{var k=Ha();T(d,k)};R(m,d=>{_(s)&&d(M)})}T(e,f),ae(),n()}Ve(["click","keydown"]);var Va=L('<div class="app svelte-kgv9du"><!> <!> <!> <!> <!> <!></div>');function Ya(e,t){se(t,!0);const[r,n]=Ye(),a=()=>re(Ct,"$authStore",r);let s=K(!1),i=K(!1),l=K(!1);ir(async()=>{await Yt(),window.svelteApp={showAuthModal:()=>A(s,!0),showModelModal:()=>A(i,!0),showRoleModal:()=>A(l,!0),sendMessage:E=>{}}});function o(E){A(s,!1),Yt()}function u(E){A(i,!1)}function v(E){A(l,!1)}function f(){const E=document.querySelector(".chat-area");E&&(E.scrollTop=E.scrollHeight)}function c(){a().isAuthenticated?A(i,!0):A(s,!0)}function h(){a().isAuthenticated?A(l,!0):A(s,!0)}var y=Va(),x=b(y);js(x,{onModelClick:c,onRoleClick:h});var p=C(x,2);aa(p,{});var g=C(p,2);pa(g,{onScrollToBottom:f});var S=C(g,2);{var m=E=>{Ea(E,{onClose:()=>A(s,!1),onSuccess:o})};R(S,E=>{_(s)&&E(m)})}var M=C(S,2);{var d=E=>{Da(E,{onClose:()=>A(i,!1),onSelect:u})};R(M,E=>{_(i)&&E(d)})}var k=C(M,2);{var w=E=>{Ba(E,{onClose:()=>A(l,!1),onSelect:v})};R(k,E=>{_(l)&&E(w)})}T(e,y),ae(),n()}try{const e=ys(Ya,{target:document.getElementById("svelte-app"),props:{}});window.svelteApp=e}catch(e){console.error("Failed to mount Svelte app:",e);const t=document.getElementById("svelte-app");t&&(t.innerHTML=`<div style="color: red; padding: 20px;">
      <h3>Svelte App Error</h3>
      <p>${e.message}</p>
      <pre>${e.stack}</pre>
    </div>`)}
