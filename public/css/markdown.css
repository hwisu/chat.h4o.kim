/* Markdown rendering styles */
.message-content .code-container {
    position: relative;
    margin: 8px 0;
}

.message-content .copy-button,
.copy-response-button {
    background: rgba(0, 0, 0, 0.7);
    color: #ccc;
    border: 1px solid #444;
    border-radius: 3px;
    padding: 4px 8px;
    font-size: 11px;
    font-family: 'JetBrains Mono', 'Courier New', monospace;
    cursor: pointer;
    transition: all 0.2s ease;
    backdrop-filter: blur(4px);
    text-transform: lowercase;
}

.message-content .copy-button {
    position: absolute;
    bottom: 8px;
    right: 8px;
    z-index: 10;
}

.copy-response-button {
    margin-left: 10px;
    vertical-align: middle;
}

.message-content .copy-button:hover,
.copy-response-button:hover {
    background: rgba(0, 0, 0, 0.9);
    color: #00ff88;
    border-color: #00ff88;
    transform: scale(1.05);
}

.message-content .copy-button:active,
.copy-response-button:active {
    transform: scale(0.95);
}

.message-content .copy-button.copied,
.copy-response-button.copied {
    background: rgba(0, 40, 0, 0.8);
    color: #00ff88;
    border-color: #00ff88;
}

/* Code block styles */
.message-content pre.code-block {
    background: #1a1a1a;
    border: 1px solid #333;
    border-radius: 4px;
    padding: 12px;
    margin: 0; /* Remove margin since it's now handled by .code-container */
    overflow-x: auto;
    font-family: 'JetBrains Mono', 'Courier New', monospace;
    font-size: 14px;
    line-height: 1.4;

    /* Enable word wrapping for long lines */
    white-space: pre-wrap;
    word-wrap: break-word;
    overflow-wrap: break-word;
}

.message-content pre.code-block code {
    /* Ensure code also wraps properly */
    white-space: pre-wrap;
    word-wrap: break-word;
    overflow-wrap: break-word;
}

.message-content code.inline-code {
    background: #1a1a1a;
    border: 1px solid #333;
    border-radius: 2px;
    padding: 2px 4px;
    font-family: 'JetBrains Mono', 'Courier New', monospace;
    color: #00ff88;
    font-size: 13px;
}

/* Markdown text formatting */
.message-content .md-h1,
.message-content .md-h2,
.message-content .md-h3 {
    color: #00ff00;
    font-weight: bold;
    margin: 16px 0 8px 0;
    border-bottom: 1px solid #333;
    padding-bottom: 4px;
}

.message-content .md-h1 { font-size: 1.4em; }
.message-content .md-h2 { font-size: 1.2em; }
.message-content .md-h3 { font-size: 1.1em; }

.message-content .md-ul {
    margin: 8px 0;
    padding-left: 0;
    list-style: none;
}

.message-content .md-li {
    margin: 4px 0;
    padding-left: 30px;
    position: relative;
}

.message-content .md-li::before {
    content: "•";
    color: #00ff00;
    position: absolute;
    left: 0;
    top: 0;
    min-width: 25px;
}

/* Standard HTML lists generated by marked */
.message-content ul {
    margin: 8px 0;
    padding-left: 20px;
    list-style: none;
}

.message-content ul li {
    margin: 4px 0;
    padding-left: 20px;
    position: relative;
}

.message-content ul li::before {
    content: "•";
    color: #00ff00;
    position: absolute;
    left: 0;
    top: 0;
    font-weight: bold;
}

/* Improved ordered list styles */
.message-content ol {
    margin: 8px 0;
    padding-left: 20px;
    list-style: none;
    counter-reset: list-counter;
}

.message-content ol li {
    margin: 4px 0;
    padding-left: 25px; /* Increased padding for better alignment */
    position: relative;
    counter-increment: list-counter;
}

.message-content ol li::before {
    content: counter(list-counter) ".";
    color: #00ff00;
    position: absolute;
    left: 0;
    top: 0;
    font-weight: bold;
    min-width: 25px; /* Wider to accommodate double-digit numbers */
    text-align: right; /* Right-align the numbers */
    padding-right: 5px; /* Add some space after the period */
}

/* Nested list counter styles */
.message-content ol ol {
    counter-reset: nested-counter;
}

.message-content ol ol li {
    counter-increment: nested-counter;
}

.message-content ol ol li::before {
    content: counter(nested-counter) ".";
}

/* Double-nested list counter styles */
.message-content ol ol ol {
    counter-reset: double-nested-counter;
}

.message-content ol ol ol li {
    counter-increment: double-nested-counter;
}

.message-content ol ol ol li::before {
    content: counter(double-nested-counter) ".";
}

/* Fix for lists with more than 10 items */
.message-content ol li:nth-child(n+10)::before {
    min-width: 30px; /* Extra width for double digits */
}

/* Fix for lists with more than 100 items */
.message-content ol li:nth-child(n+100)::before {
    min-width: 35px; /* Extra width for triple digits */
}

.message-content ol ol,
.message-content ul ul,
.message-content ol ul,
.message-content ul ol {
    margin: 4px 0;
    padding-left: 20px;
}

/* Links and text formatting */
.message-content .md-link {
    color: #0088ff;
    text-decoration: underline;
}

.message-content .md-link:hover {
    color: #00aaff;
}

.message-content strong {
    color: #00ff00;
    font-weight: bold;
}

.message-content em {
    color: #ffaa00;
    font-style: italic;
}

.message-content blockquote {
    border-left: 3px solid #00ff00;
    margin: 8px 0;
    padding-left: 12px;
    color: #ccc;
    font-style: italic;
}

/* Table styles */
.message-content table {
    border-collapse: collapse;
    margin: 8px 0;
    width: 100%;
    max-width: 100%;
    overflow-x: auto;
    display: block;
    white-space: nowrap;
}

.message-content table thead,
.message-content table tbody {
    display: table;
    width: 100%;
    table-layout: fixed;
}

.message-content table th,
.message-content table td {
    border: 1px solid #333;
    padding: 6px 8px;
    text-align: left;
    display: table-cell;
}

.message-content table th {
    background: #1a1a1a;
    color: #00ff00;
    font-weight: bold;
}
